{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useState,useEffect}from'react';import Icon from\"@expo/vector-icons/Ionicons\";import Icon2 from\"@expo/vector-icons/MaterialCommunityIcons\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import Image from\"react-native-web/dist/exports/Image\";import TouchableHighlight from\"react-native-web/dist/exports/TouchableHighlight\";import{store,db,images}from\"../../App\";export default function Orders(_ref){var route=_ref.route;var user=store.getState().cartReducer.user;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),restaurante=_useState2[0],setRestaurante=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),restaurants=_useState4[0],setRestaurants=_useState4[1];getRestaurante(user,setRestaurante,setRestaurants);if(restaurante==\"\"||Object.keys(restaurants).length==0)return React.createElement(View,null,React.createElement(Text,null,\"Sorry\"));return React.createElement(View,null,React.createElement(Text,{style:styles.restaurantesOffer},\"Pedidos:\"),React.createElement(ScrollView,null,Object.keys(restaurants[restaurante].pedidos).map(function(pedidoI){return React.createElement(View,{style:styles.button,key:restaurants[restaurante].pedidos[pedidoI].Id},React.createElement(View,{style:styles.containerRow},React.createElement(Icon2,{name:\"new-box\",size:50,style:{alignSelf:'center',paddingHorizontal:20}}),React.createElement(View,{style:styles.containerColumn},React.createElement(Text,{style:styles.restaurantesOffer},restaurants[restaurante].pedidos[pedidoI].Morada),React.createElement(Text,{style:styles.foodText},\"Pratos : \"),React.createElement(View,{style:styles.containerRow},restaurants[restaurante].pedidos[pedidoI].Pratos.map(function(prato){return React.createElement(View,{key:restaurants[restaurante].pedidos[pedidoI].Id},React.createElement(Text,{style:{paddingLeft:10}},prato));})),React.createElement(View,{style:styles.containerRow},React.createElement(Text,null,\"Status:\",'\\n'),React.createElement(Text,{style:{paddingLeft:10}},restaurants[restaurante].pedidos[pedidoI].Status)),restaurants[restaurante].pedidos[pedidoI].Estafeta&&React.createElement(View,{style:styles.containerRow},React.createElement(Text,null,\"Estafeta:\",'\\n'),React.createElement(Text,{style:{paddingLeft:10}},restaurants[restaurante].pedidos[pedidoI].Estafeta)),React.createElement(View,{style:styles.containerRow},!restaurants[restaurante].pedidos[pedidoI].Estafeta&&React.createElement(TouchableHighlight,{underlayColor:\"#DDDDDD\",activeOpacity:0.3,style:styles.button,onPress:function onPress(){var tmpPedido=restaurants[restaurante].pedidos[pedidoI];tmpPedido.Status=\"waiting\";tmpPedido.Restaurante=restaurante;db.ref(\"restaurantes/\"+restaurante+\"/pedidos/\"+pedidoI).set(tmpPedido);db.ref(\"Pedidos\").push(restaurants[restaurante].pedidos[pedidoI]);}},React.createElement(Icon2,{name:\"check-bold\",size:15,style:{borderRightWidth:5,borderRightColor:'rgba(0,0,0,0)'}})),React.createElement(TouchableHighlight,{underlayColor:\"#DDDDDD\",activeOpacity:0.3,style:styles.button,onPress:function onPress(){db.ref(\"restaurantes/\"+restaurante+\"/pedidos/\"+pedidoI).remove();}},React.createElement(Icon2,{name:\"delete\",size:15}))))));})));}function getRestaurante(user,setRestaurante,setRestaurants){return _regeneratorRuntime.async(function getRestaurante$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regeneratorRuntime.awrap(db.ref(\"Users/\"+user).once('value').then(function(res){return setRestaurante(res.val()[\"restaurante\"]);}));case 2:_context.next=4;return _regeneratorRuntime.awrap(db.ref(\"restaurantes\").once('value').then(function(res){return setRestaurants(res.val());}));case 4:case\"end\":return _context.stop();}}},null,null,null,Promise);}var styles=StyleSheet.create({containerRow:{paddingBottom:10,flexDirection:'row'},containerColumn:{paddingLeft:10,paddingBottom:10,flexDirection:'column'},restaurantesOffer:{fontSize:15,fontWeight:'bold',textAlign:'left',color:'black'},foodText:{fontSize:12,textAlign:'left'},button:{padding:7},image:{width:150,height:100}});","map":{"version":3,"sources":["D:/dev/appAmsree/screens/AppRestaurante/Orders.js"],"names":["React","useState","useEffect","Icon","Icon2","store","db","images","Orders","route","user","getState","cartReducer","restaurante","setRestaurante","restaurants","setRestaurants","getRestaurante","Object","keys","length","styles","restaurantesOffer","pedidos","map","pedidoI","button","Id","containerRow","alignSelf","paddingHorizontal","containerColumn","Morada","foodText","Pratos","prato","paddingLeft","Status","Estafeta","tmpPedido","Restaurante","ref","set","push","borderRightWidth","borderRightColor","remove","once","then","res","val","StyleSheet","create","paddingBottom","flexDirection","fontSize","fontWeight","textAlign","color","padding","image","width","height"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Icon from 'react-native-vector-icons/Ionicons';\r\nimport Icon2 from 'react-native-vector-icons/MaterialCommunityIcons';\r\nimport { StyleSheet, Text, View, ScrollView, Image, TouchableHighlight } from 'react-native';\r\nimport { store, db, images } from '../../App';\r\n\r\nexport default function Orders({ route }) {\r\n    let user = store.getState().cartReducer.user;\r\n    const [restaurante, setRestaurante] = useState(\"\");\r\n    const [restaurants, setRestaurants] = useState({});\r\n    getRestaurante(user, setRestaurante, setRestaurants);\r\n    if (restaurante == \"\" || Object.keys(restaurants).length == 0) return (<View><Text>Sorry</Text></View>);\r\n    return (\r\n        <View>\r\n            <Text style={styles.restaurantesOffer}>Pedidos:</Text>\r\n            <ScrollView>{\r\n                Object.keys(restaurants[restaurante].pedidos).map(pedidoI => {\r\n                    return (\r\n                        <View style={styles.button} key={restaurants[restaurante].pedidos[pedidoI].Id}>\r\n                            <View style={styles.containerRow}>\r\n                                <Icon2 name=\"new-box\" size={50} style={{alignSelf:'center', paddingHorizontal: 20}}/>\r\n                                <View style={styles.containerColumn}>\r\n                                    <Text style={styles.restaurantesOffer}>{restaurants[restaurante].pedidos[pedidoI].Morada}</Text>\r\n                                    <Text style={styles.foodText}>Pratos : </Text>\r\n                                    <View style={styles.containerRow}>{\r\n                                        restaurants[restaurante].pedidos[pedidoI].Pratos.map(\r\n                                        (prato) => {return(\r\n                                        <View key={restaurants[restaurante].pedidos[pedidoI].Id}>\r\n                                            <Text style={{paddingLeft:10}}>{prato}</Text>\r\n                                        </View>);}\r\n                                        )\r\n                                    }\r\n                                    </View>\r\n                                    <View style={styles.containerRow}>\r\n                                        <Text>Status:{'\\n'}</Text>\r\n                                        <Text style={{paddingLeft: 10}}>{restaurants[restaurante].pedidos[pedidoI].Status}</Text>\r\n                                    </View>\r\n                                    {restaurants[restaurante].pedidos[pedidoI].Estafeta &&\r\n                                    <View style={styles.containerRow}>\r\n                                        <Text>Estafeta:{'\\n'}</Text>\r\n                                        <Text style={{paddingLeft: 10}}>{restaurants[restaurante].pedidos[pedidoI].Estafeta}</Text>\r\n                                    </View>\r\n                                    }\r\n                                    <View style={styles.containerRow}>\r\n                                        {!restaurants[restaurante].pedidos[pedidoI].Estafeta && <TouchableHighlight underlayColor={\"#DDDDDD\"} activeOpacity={0.3} style={styles.button} onPress={() => {\r\n                                            let tmpPedido = restaurants[restaurante].pedidos[pedidoI]\r\n                                            tmpPedido.Status=\"waiting\";\r\n                                            tmpPedido.Restaurante=restaurante;\r\n                                            db.ref(\"restaurantes/\" + restaurante + \"/pedidos/\" + pedidoI).set( tmpPedido)\r\n                                            db.ref(\"Pedidos\").push(restaurants[restaurante].pedidos[pedidoI]);\r\n                                         }}>\r\n                                            <Icon2 name=\"check-bold\" size={15} style={{ borderRightWidth: 5, borderRightColor: 'rgba(0,0,0,0)' }} />\r\n                                        </TouchableHighlight>}\r\n                                        <TouchableHighlight underlayColor={\"#DDDDDD\"} activeOpacity={0.3} style={styles.button} onPress={() => {\r\n                                            db.ref(\"restaurantes/\" + restaurante + \"/pedidos/\" + pedidoI).remove();\r\n                                         }}>\r\n                                            <Icon2 name=\"delete\" size={15} />\r\n                                        </TouchableHighlight>\r\n                                    </View>\r\n                                </View>\r\n                            </View>\r\n                        </View>\r\n                    );\r\n                })\r\n            }</ScrollView>\r\n        </View>\r\n\r\n    );\r\n}\r\n\r\n\r\nasync function getRestaurante(user, setRestaurante, setRestaurants) {\r\n    await db.ref(\"Users/\" + user).once('value').then(res => setRestaurante(res.val()[\"restaurante\"]));\r\n    await db.ref(\"restaurantes\").once('value').then(res => setRestaurants(res.val()));\r\n}\r\n\r\n\r\nconst styles = StyleSheet.create({\r\n    containerRow: {\r\n        paddingBottom: 10,\r\n        flexDirection: 'row'\r\n    },\r\n    containerColumn: {\r\n        paddingLeft: 10,\r\n        paddingBottom: 10,\r\n        flexDirection: 'column'\r\n    },\r\n    restaurantesOffer: {\r\n        fontSize: 15,\r\n        fontWeight: 'bold',\r\n        textAlign: 'left',\r\n        color: 'black'\r\n    },\r\n    foodText: {\r\n        fontSize: 12,\r\n        textAlign: 'left',\r\n\r\n    },\r\n    button: {\r\n        padding: 7,\r\n    },\r\n    image: {\r\n        width: 150,\r\n        height: 100,\r\n    }\r\n});\r\n"]},"metadata":{},"sourceType":"module"}