{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useState,useEffect}from'react';import{useSelector,useDispatch}from'react-redux';import{createStackNavigator}from'@react-navigation/stack';import{db,images,store}from\"../../App\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import Image from\"react-native-web/dist/exports/Image\";import TouchableHighlight from\"react-native-web/dist/exports/TouchableHighlight\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";var imgQuichVeg=require(\"../../assets/quicheVegsGluten.jpg\");import Icon from\"@expo/vector-icons/MaterialCommunityIcons\";var imgCremeEspi=require(\"../../assets/cremedeespinafres.jpg\");var imgSaladaQSerra=require(\"../../assets/saladaqueijoserra.jpg\");export function CartScreen(props){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),cart=_useState2[0],setCart=_useState2[1];var user=store.getState().cartReducer.user;var dispatch=useDispatch();getCart(user,setCart);useEffect(function(){setTimeout(function(){return getCart(user,setCart);},1000);if(cart==null)setTimeout(function(){return setCart({});},1000);},[cart]);var getTotal=function getTotal(){if(cart==null)return 0;var res=0;for(var _i=0,_Object$keys=Object.keys(cart);_i<_Object$keys.length;_i++){var prato=_Object$keys[_i];res+=cart[prato].Preco;}return res;};if(cart==null)return React.createElement(View,null,React.createElement(Text,{style:styles.restaurantesOffer},\"Pre\\xE7o total: \",getTotal(),\"\\u20AC\"),React.createElement(TouchableOpacity,{style:styles.payButtonContainer},React.createElement(Text,{style:styles.payButtonText},\"Pagar\")));return React.createElement(View,null,React.createElement(ScrollView,null,Object.keys(cart).map(function(prato){return React.createElement(TouchableHighlight,{underlayColor:\"#DDDDDD\",style:styles.button,key:prato},React.createElement(View,{style:styles.containerRow},React.createElement(View,{style:styles.containerRow},React.createElement(Image,{style:styles.image,source:getImageByName(cart[prato].image)})),React.createElement(View,{style:styles.containerColumn},React.createElement(Text,{style:styles.restaurantesOffer},cart[prato].Name),React.createElement(Text,{style:styles.foodText},\"Op\\xE7\\xF5es : \",cart[prato].Opcoes,\"\\n\",\"Pre\\xE7o : \",cart[prato].Preco,\" \\u20AC\")),React.createElement(TouchableHighlight,{underlayColor:\"#DDDDDD\",activeOpacity:0.3,style:styles.delButton,onPress:function onPress(){db.ref(\"Users/\"+user+\"/cart/\"+prato).remove();db.ref(\"Users/\"+user+\"/cart\").once('value').then(function(res){setCart(res.val());});}},React.createElement(Icon,{name:\"delete\",size:25}))));})),React.createElement(Text,{style:styles.restaurantesOffer},\"Pre\\xE7o total: \",getTotal(),\"\\u20AC\"),React.createElement(TouchableOpacity,{style:styles.payButtonContainer},React.createElement(Text,{style:styles.payButtonText},\"Pagar\")));}var Stack=createStackNavigator();function getCart(user,setCart){db.ref(\"Users/\"+user+\"/cart\").once('value').then(function(res){setCart(res.val());});}export default function Cart(route){return React.createElement(Stack.Navigator,{initialroute:'Carrinho',screenOptions:{headerTitleAlign:'center',headerStyle:{backgroundColor:'darkcyan'},headerTintColor:'white'}},React.createElement(Stack.Screen,{name:\"Carrinho\",component:CartScreen}));}var getImageByName=function getImageByName(imageName){var img=images[imageName];if(img!=null)return img;return images[\"default\"];};var mapStateToProps=function mapStateToProps(state){return{cartList:state.cartReducer.cart};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{add:function add(prato){return dispatch({type:\"addPrato\",prato:prato});}};};var styles=StyleSheet.create({containerRow:{flexDirection:'row'},containerColumn:{paddingLeft:10,paddingBottom:10,flexDirection:'column'},restaurantesOffer:{fontSize:15,fontWeight:'bold',textAlign:'left',color:'black'},foodText:{fontSize:12,textAlign:'left'},button:{padding:7,backgroundColor:\"#DDDDDD\"},delButton:{flex:1,flexDirection:'row',justifyContent:'center',alignSelf:'center'},image:{width:150,height:100},payButtonContainer:{elevation:8,backgroundColor:\"#009688\",borderRadius:10,paddingVertical:10,paddingHorizontal:12},payButtonText:{fontSize:18,color:\"#fff\",fontWeight:\"bold\",alignSelf:\"center\",textTransform:\"uppercase\"}});","map":{"version":3,"sources":["D:/dev/appAmsree/screens/AppCliente/Cart.js"],"names":["React","useState","useEffect","useSelector","useDispatch","createStackNavigator","db","images","store","imgQuichVeg","require","Icon","imgCremeEspi","imgSaladaQSerra","CartScreen","props","cart","setCart","user","getState","cartReducer","dispatch","getCart","setTimeout","getTotal","res","Object","keys","prato","Preco","styles","restaurantesOffer","payButtonContainer","payButtonText","map","button","containerRow","image","getImageByName","containerColumn","Name","foodText","Opcoes","delButton","ref","remove","once","then","val","Stack","Cart","route","headerTitleAlign","headerStyle","backgroundColor","headerTintColor","imageName","img","mapStateToProps","state","cartList","mapDispatchToProps","add","type","StyleSheet","create","flexDirection","paddingLeft","paddingBottom","fontSize","fontWeight","textAlign","color","padding","flex","justifyContent","alignSelf","width","height","elevation","borderRadius","paddingVertical","paddingHorizontal","textTransform"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { createStackNavigator } from '@react-navigation/stack';\r\nimport { db, images, store } from '../../App';\r\nimport { StyleSheet, Text, View, ScrollView, Image, TouchableHighlight, TouchableOpacity } from 'react-native';\r\nvar imgQuichVeg = require('../../assets/quicheVegsGluten.jpg');\r\nimport Icon from 'react-native-vector-icons/MaterialCommunityIcons';\r\nvar imgCremeEspi = require('../../assets/cremedeespinafres.jpg');\r\nvar imgSaladaQSerra = require('../../assets/saladaqueijoserra.jpg');\r\n\r\n\r\nexport function CartScreen(props) {\r\n    const [cart, setCart] = useState({});\r\n    let user = store.getState().cartReducer.user;\r\n    const dispatch = useDispatch();\r\n    getCart(user, setCart);\r\n    useEffect(() => {\r\n        setTimeout(()=>getCart(user, setCart), 1000);\r\n        if(cart == null) setTimeout(()=>setCart({}), 1000);\r\n        \r\n    }, [cart])\r\n    const getTotal = () => {\r\n        if (cart == null) return 0;\r\n        let res = 0;\r\n        for (let prato of Object.keys(cart)) {\r\n            res += cart[prato].Preco;\r\n        }\r\n        return res;\r\n    }\r\n    if (cart == null) return (\r\n        <View>\r\n            <Text style={styles.restaurantesOffer}>Preço total: {getTotal()}€</Text>\r\n            <TouchableOpacity style={styles.payButtonContainer}>\r\n                <Text style={styles.payButtonText}>Pagar</Text>\r\n            </TouchableOpacity>\r\n        </View>\r\n    );\r\n    return (\r\n        <View>\r\n            <ScrollView>{\r\n                Object.keys(cart).map(prato => {\r\n                    return (\r\n                        <TouchableHighlight underlayColor={\"#DDDDDD\"} style={styles.button} key={prato} >\r\n                            <View style={styles.containerRow}>\r\n                                <View style={styles.containerRow}>\r\n                                    <Image style={styles.image} source={getImageByName(cart[prato].image)} />\r\n                                </View>\r\n                                <View style={styles.containerColumn}>\r\n                                    <Text style={styles.restaurantesOffer}>{cart[prato].Name}</Text>\r\n                                    <Text style={styles.foodText}>Opções : {cart[prato].Opcoes}\r\n                                        {\"\\n\"}\r\n                                Preço : {cart[prato].Preco} €</Text>\r\n                                </View>\r\n                                <TouchableHighlight underlayColor={\"#DDDDDD\"} activeOpacity={0.3} style={styles.delButton} onPress={() => {\r\n                                    db.ref(\"Users/\" + user + \"/cart/\" + prato).remove();\r\n                                    db.ref(\"Users/\" + user + \"/cart\").once('value').then(res => { setCart(res.val()) });\r\n\r\n                                }}>\r\n                                    <Icon name=\"delete\" size={25} />\r\n                                </TouchableHighlight>\r\n                            </View>\r\n\r\n                        </TouchableHighlight>\r\n\r\n                    );\r\n                })\r\n            }</ScrollView>\r\n            <Text style={styles.restaurantesOffer}>Preço total: {getTotal()}€</Text>\r\n            <TouchableOpacity style={styles.payButtonContainer}>\r\n                <Text style={styles.payButtonText}>Pagar</Text>\r\n            </TouchableOpacity>\r\n        </View>\r\n\r\n    );\r\n}\r\n\r\nconst Stack = createStackNavigator();\r\n\r\nfunction getCart(user, setCart) {\r\n    db.ref(\"Users/\" + user + \"/cart\").once('value').then(res => { setCart(res.val()) });\r\n}\r\n\r\nexport default function Cart(route) {\r\n    return (\r\n        <Stack.Navigator initialroute={'Carrinho'} screenOptions={{ headerTitleAlign: 'center', headerStyle: { backgroundColor: 'darkcyan' }, headerTintColor: 'white' }}>\r\n            <Stack.Screen name=\"Carrinho\" component={CartScreen} />\r\n        </Stack.Navigator>);\r\n\r\n}\r\n\r\n\r\nconst getImageByName = (imageName) => {\r\n    let img = images[imageName]\r\n    if (img != null) return img\r\n    return images[\"default\"]\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => { return { cartList: state.cartReducer.cart } };\r\n\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        add: (prato) => dispatch({ type: \"addPrato\", prato: prato })\r\n    }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    containerRow: {\r\n        flexDirection: 'row'\r\n    },\r\n    containerColumn: {\r\n        paddingLeft: 10,\r\n        paddingBottom: 10,\r\n        flexDirection: 'column'\r\n    },\r\n    restaurantesOffer: {\r\n        fontSize: 15,\r\n        fontWeight: 'bold',\r\n        textAlign: 'left',\r\n        color: 'black'\r\n    },\r\n    foodText: {\r\n        fontSize: 12,\r\n        textAlign: 'left',\r\n\r\n    },\r\n    button: {\r\n        padding: 7,\r\n        backgroundColor: \"#DDDDDD\",\r\n    },\r\n    delButton: {\r\n        flex: 1,\r\n        flexDirection: 'row',\r\n        justifyContent: 'center',\r\n        alignSelf: 'center'\r\n\r\n    },\r\n    image: {\r\n        width: 150,\r\n        height: 100,\r\n    },\r\n    payButtonContainer: {\r\n        elevation: 8,\r\n        backgroundColor: \"#009688\",\r\n        borderRadius: 10,\r\n        paddingVertical: 10,\r\n        paddingHorizontal: 12\r\n    },\r\n    payButtonText: {\r\n        fontSize: 18,\r\n        color: \"#fff\",\r\n        fontWeight: \"bold\",\r\n        alignSelf: \"center\",\r\n        textTransform: \"uppercase\"\r\n    }\r\n});"]},"metadata":{},"sourceType":"module"}