{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useState,useEffect,useContext,useCallback}from'react';import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import Image from\"react-native-web/dist/exports/Image\";import TouchableHighlight from\"react-native-web/dist/exports/TouchableHighlight\";import{useDispatch}from'react-redux';import{addPrato}from\"../../assets/cartState\";import{db,images,store}from\"../../App\";export default function RestauranteMenu(_ref){var route=_ref.route;var restauranteName=route.params.restaurante[\"Name\"];var _useState=useState({}),_useState2=_slicedToArray(_useState,2),pratos=_useState2[0],setPratos=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),cart=_useState4[0],setCart=_useState4[1];getCart(user,setCart);var user=store.getState().cartReducer.user;useEffect(function(){db.ref(\"Users/\"+user+\"/cart\").once('value').then(function(res){setCart(res.val());});db.ref(\"restaurantes/\"+restauranteName+\"/Pratos\").once('value').then(function(res){return setPratos(res.val());});},[]);var dispatch=useDispatch();return React.createElement(View,{style:{flex:1}},React.createElement(Text,{style:styles.restaurantesOffer},\"Pratos Dispon\\xEDveis:\"),React.createElement(ScrollView,null,Object.keys(pratos).map(function(prato){return React.createElement(TouchableHighlight,{underlayColor:\"#DDDDDD\",activeOpacity:0.3,style:styles.button,key:pratos[prato].Id,onPress:function onPress(){if(checkSameRestaurant(cart,restauranteName))db.ref('Users/'+user+\"/cart\").push(pratos[prato]);}},React.createElement(View,{style:styles.containerRow},React.createElement(Image,{style:styles.image,source:getImageByName(pratos[prato].image)}),React.createElement(View,{style:styles.containerColumn},React.createElement(Text,{style:styles.restaurantesOffer},pratos[prato].Name),React.createElement(Text,{style:styles.foodText},\"Op\\xE7\\xF5es : \",pratos[prato].Opcoes,\"\\n\",\"Pre\\xE7o : \",pratos[prato].Preco,\" \\u20AC\"))));})));}var getImageByName=function getImageByName(imageName){var img=images[imageName];if(img!=null)return img;return images[\"default\"];};function getCart(user,setCart){}function checkSameRestaurant(cart,currentRestauranteName){if(cart==null)return true;for(var prato in Object.values(cart)){if(prato.Restaurante!=currentRestauranteName)return false;}return true;}var styles=StyleSheet.create({containerRow:{paddingBottom:10,flexDirection:'row'},containerColumn:{paddingLeft:10,paddingBottom:10,flexDirection:'column'},restaurantesOffer:{fontSize:15,fontWeight:'bold',textAlign:'left',color:'black'},foodText:{fontSize:12,textAlign:'left'},button:{padding:7},image:{width:150,height:100}});","map":{"version":3,"sources":["D:/dev/appAmsree/screens/AppCliente/RestauranteMenu.js"],"names":["React","useState","useEffect","useContext","useCallback","useDispatch","addPrato","db","images","store","RestauranteMenu","route","restauranteName","params","restaurante","pratos","setPratos","cart","setCart","getCart","user","getState","cartReducer","ref","once","then","res","val","dispatch","flex","styles","restaurantesOffer","Object","keys","map","prato","button","Id","checkSameRestaurant","push","containerRow","image","getImageByName","containerColumn","Name","foodText","Opcoes","Preco","imageName","img","currentRestauranteName","values","Restaurante","StyleSheet","create","paddingBottom","flexDirection","paddingLeft","fontSize","fontWeight","textAlign","color","padding","width","height"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext, useCallback } from 'react';\nimport { StyleSheet, Text, View, ScrollView, Image, TouchableHighlight } from 'react-native';\nimport { useDispatch } from 'react-redux';\nimport { addPrato } from '../../assets/cartState';\nimport { db, images, store } from '../../App';\n\nexport default function RestauranteMenu({ route }) {\n    const restauranteName = route.params.restaurante[\"Name\"];\n    const [pratos, setPratos] = useState({});\n    const [cart, setCart] = useState([]);\n    getCart(user, setCart);\n    let user = store.getState().cartReducer.user;\n    useEffect(() => {\n        db.ref(\"Users/\" + user + \"/cart\").once('value').then(res => { setCart(res.val()) });\n        \n        db.ref(\"restaurantes/\" + restauranteName + \"/Pratos\").once('value').then(res => setPratos(res.val()));\n    }, []);\n    const dispatch = useDispatch();\n    return (\n        <View style={{ flex: 1 }}>\n            <Text style={styles.restaurantesOffer}>Pratos Disponíveis:</Text>\n            <ScrollView>{\n                Object.keys(pratos).map(prato => {\n                    return (\n                        <TouchableHighlight underlayColor={\"#DDDDDD\"} activeOpacity={0.3} style={styles.button} key={pratos[prato].Id} onPress={() => {\n                            if (checkSameRestaurant(cart, restauranteName))\n                                db.ref('Users/' + user + \"/cart\").push(pratos[prato]);\n                        }}>\n                            <View style={styles.containerRow}>\n                                <Image style={styles.image} source={getImageByName(pratos[prato].image)} />\n                                <View style={styles.containerColumn}>\n                                    <Text style={styles.restaurantesOffer}>{pratos[prato].Name}</Text>\n                                    <Text style={styles.foodText}>Opções : {pratos[prato].Opcoes}\n                                        {\"\\n\"}\n                            Preço : {pratos[prato].Preco} €</Text>\n                                </View>\n                            </View>\n                        </TouchableHighlight>\n                    );\n                })\n            }</ScrollView>\n        </View>\n\n    );\n}\n\nconst getImageByName = (imageName) => {\n    let img = images[imageName]\n    if (img != null) return img\n    return images[\"default\"]\n}\n\nfunction getCart(user, setCart) {\n}\n\nfunction checkSameRestaurant(cart, currentRestauranteName) {\n    if (cart == null) return true;\n    for (let prato in Object.values(cart)) {\n        if (prato.Restaurante != currentRestauranteName)\n            return false;\n    }\n    return true;\n}\n\nconst styles = StyleSheet.create({\n    containerRow: {\n        paddingBottom: 10,\n        flexDirection: 'row'\n    },\n    containerColumn: {\n        paddingLeft: 10,\n        paddingBottom: 10,\n        flexDirection: 'column'\n    },\n    restaurantesOffer: {\n        fontSize: 15,\n        fontWeight: 'bold',\n        textAlign: 'left',\n        color: 'black'\n    },\n    foodText: {\n        fontSize: 12,\n        textAlign: 'left',\n\n    },\n    button: {\n        padding: 7,\n    },\n    image: {\n        width: 150,\n        height: 100,\n    }\n});"]},"metadata":{},"sourceType":"module"}