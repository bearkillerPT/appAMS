{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useState,useEffect}from'react';import TextInput from\"react-native-web/dist/exports/TextInput\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import{createStackNavigator}from'@react-navigation/stack';import ClienteApp from\"./screens/AppCliente/AppClientes\";import RestauranteApp from\"./screens/AppRestaurante/AppRestaurante\";import{setLogged,setUser}from\"./assets/cartState\";import EstafetaApp from\"./screens/AppEstafeta/AppEstafeta\";import{Provider}from'react-redux';import configStore from\"./Store\";import{useDispatch}from'react-redux';import{database}from'firebase/app';import{Restart}from'fiction-expo-restart';var firebase=require('firebase/app');require('firebase/database');var xmasPromo=require(\"./assets/xmaspromo.jpg\");var newYearPromo=require(\"./assets/newYearPromo.jpg\");var imgVegifruit=require(\"./assets/vegifruit.png\");var imgGreenCity=require(\"./assets/greencity.png\");var imgSaladasmais=require(\"./assets/saladasmais.jpg\");var imgQuichVeg=require(\"./assets/quicheVegsGluten.jpg\");var imgCremeEspi=require(\"./assets/cremedeespinafres.jpg\");var imgSaladaQSerra=require(\"./assets/saladaqueijoserra.jpg\");var imgSandesBase=require(\"./assets/sandesBase.jpg\");var imgPratoCarne=require(\"./assets/pratoCarne.jpg\");var imgPratoPeixe=require(\"./assets/pratoPeixe.jpg\");var favicon=require(\"./assets/favicon.png\");export var images={\"xmasPromo\":xmasPromo,\"newYearPromo\":newYearPromo,\"imgVegifruit\":imgVegifruit,\"imgGreenCity\":imgGreenCity,\"imgSaladasmais\":imgSaladasmais,\"imgQuichVeg\":imgQuichVeg,\"imgCremeEspi\":imgCremeEspi,\"imgSaladaQSerra\":imgSaladaQSerra,\"imgSandesBase\":imgSandesBase,\"imgPratoCarne\":imgPratoCarne,\"imgPratoPeixe\":imgPratoPeixe,\"default\":favicon};var users={\"cliente\":{\"type\":\"cliente\",\"password\":\"cliente\"},\"restaurante\":{\"type\":\"restaurante\",\"password\":\"restaurante\",\"restaurante\":\"Vegifruit\"},\"estafeta\":{\"type\":\"estafeta\",\"password\":\"estafeta\",\"feedback\":[{\"id\":1,\"restaurante\":\"Vegifruit\",\"rating\":5},{\"id\":2,\"restaurante\":\"Saladas+\",\"rating\":4},{\"id\":3,\"restaurante\":\"Green City quiches & saladas, co.\",\"rating\":4}],\"pedidos\":[{\"id\":1,\"restaurante\":\"Saladas+\",\"prato\":\"Prato do dia Peixe\",\"morada\":\"Universidade de Aveiro, DECA\"},{\"id\":2,\"restaurante\":\"Vegifruit\",\"prato\":\"Salada de queijo da serra\",\"morada\":\"Universidade de Aveiro, DETI\"},{\"id\":3,\"restaurante\":\"Green City quiches & saladas, co.\",\"prato\":\"Quiche especial\",\"morada\":\"Universidade de Aveiro, CP\"}]}};export var store=configStore();var firebaseConfig={apiKey:\"AIzaSyDNVW5qZxXnfqYfnNUvpFUH9dAeQfRmHu4\",authDomain:\"appams-f22a3.firebaseapp.com\",projectId:\"appams-f22a3\",storageBucket:\"appams-f22a3.appspot.com\",databaseURL:\"https://appams-f22a3-default-rtdb.firebaseio.com/\",messagingSenderId:\"184182571952\",appId:\"1:184182571952:web:576eed43083fbf07fc8c75\",measurementId:\"G-CHN6Z9P409\"};firebase.initializeApp(firebaseConfig);export var db=firebase.database();export default function AppWraper(route){return React.createElement(Provider,{store:store},React.createElement(AppContent,null));}var AppTab=createStackNavigator();function AppContent(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isCliente=_useState2[0],setIsCliente=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isRestaurante=_useState4[0],setIsRestaurante=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isEstafeta=_useState6[0],setIsEstafeta=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),toRegister=_useState8[0],setToRegister=_useState8[1];var logged=store.getState();var user=logged.cartReducer.user;logged=logged.cartReducer.isLogged;return React.createElement(React.Fragment,null,logged&&React.createElement(React.Fragment,null,isCliente&&React.createElement(ClienteApp,{setIsLogged:true}),isRestaurante&&React.createElement(RestauranteApp,{restaurante:users[user],setIsLogged:true}),isEstafeta&&React.createElement(EstafetaApp,{estafeta:users[user],setIsLogged:true})),!logged&&!toRegister&&React.createElement(Login,{user:user,setUser:setUser,setIsCliente:setIsCliente,setIsRestaurante:setIsRestaurante,setIsEstafeta:setIsEstafeta,setToRegister:setToRegister}),!logged&&toRegister&&React.createElement(Register,{setToRegister:setToRegister}));}function Register(_ref){var setToRegister=_ref.setToRegister;var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),user=_useState10[0],setUser=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),password=_useState12[0],setPassword=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),confPass=_useState14[0],setConfPass=_useState14[1];var _useState15=useState({}),_useState16=_slicedToArray(_useState15,2),users=_useState16[0],setUsers=_useState16[1];useEffect(function(){firebase.database().ref(\"Users\").once('value').then(function(res){return setUsers(res.val());});},[]);return React.createElement(View,{style:styles.container},React.createElement(Text,{style:styles.title},\"Nutrilink\"),React.createElement(View,{style:styles.loginContainer},React.createElement(View,{style:styles.inputView},React.createElement(TextInput,{placeholder:\"Username\",style:styles.input,onChangeText:function onChangeText(user){return setUser(user);}})),React.createElement(View,{style:styles.inputView},React.createElement(TextInput,{placeholder:\"Password\",style:styles.input,onChangeText:function onChangeText(pass){return setPassword(pass);},secureTextEntry:true})),React.createElement(View,{style:styles.inputView},React.createElement(TextInput,{placeholder:\"Confirm Password\",style:styles.input,onChangeText:function onChangeText(pass){return setConfPass(pass);},secureTextEntry:true})),React.createElement(View,{style:styles.containerRow},React.createElement(TouchableOpacity,{style:styles.loginButtonContainer,onPress:function onPress(){if(password==confPass){var tmpUsers=users;tmpUsers[user]={type:'cliente',password:password};console.log(tmpUsers);db.ref(\"Users\").set(tmpUsers);setToRegister(false);Restart();}}},React.createElement(Text,{style:styles.loginButtonText},\"Confirmar\")))));}function Login(_ref2){var navigation=_ref2.navigation,setIsLogged=_ref2.setIsLogged,setIsCliente=_ref2.setIsCliente,setIsRestaurante=_ref2.setIsRestaurante,setIsEstafeta=_ref2.setIsEstafeta,user=_ref2.user,setUser=_ref2.setUser,setToRegister=_ref2.setToRegister;var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),password=_useState18[0],setPassword=_useState18[1];var _useState19=useState({}),_useState20=_slicedToArray(_useState19,2),users=_useState20[0],setUsers=_useState20[1];var dispatch=useDispatch();useEffect(function(){firebase.database().ref(\"Users\").once('value').then(function(res){return setUsers(res.val());});},[]);return React.createElement(View,{style:styles.container},React.createElement(Text,{style:styles.title},\"Nutrilink\"),React.createElement(View,{style:styles.loginContainer},React.createElement(View,{style:styles.inputView},React.createElement(TextInput,{placeholder:\"Username\",style:styles.input,onChangeText:function onChangeText(username){return dispatch(setUser(username));}})),React.createElement(View,{style:styles.inputView},React.createElement(TextInput,{placeholder:\"Password\",style:styles.input,onChangeText:function onChangeText(pass){return setPassword(pass);},secureTextEntry:true})),React.createElement(View,{style:styles.containerRow},React.createElement(TouchableOpacity,{style:styles.loginButtonContainer,onPress:function onPress(){var logged=store.getState();var user=logged.cartReducer.user;console.log(user);firebase.database().ref(\"Users\").once('value').then(function(res){return setUsers(res.val());});console.log(users);for(var _i=0,_Object$keys=Object.keys(users);_i<_Object$keys.length;_i++){var typeUser=_Object$keys[_i];if(user===typeUser){if(password===users[user].password)switch(users[user].type){case\"cliente\":dispatch(setLogged(true));setIsCliente(true);break;case\"restaurante\":dispatch(setLogged(true));setIsRestaurante(true);setUser(users[user].restaurante);break;case\"estafeta\":dispatch(setLogged(true));setIsEstafeta(true);break;default:break;}}}}},React.createElement(Text,{style:styles.loginButtonText},\"Login\")),React.createElement(TouchableOpacity,{style:styles.loginButtonContainer,onPress:function onPress(){setToRegister(true);dispatch(setLogged(false));}},React.createElement(Text,{style:styles.loginButtonText},\"Registar\")))));}var styles=StyleSheet.create({container:{backgroundColor:'darkcyan',alignItems:'center',flex:1},containerRow:{paddingTop:20,flexDirection:'row'},loginContainer:{backgroundColor:'darkcyan',alignItems:'center',justifyContent:'center',flex:1},title:{borderTopWidth:100,borderTopColor:'darkcyan',fontSize:40,fontWeight:'bold',color:'cornsilk'},inputView:{borderBottomWidth:10,borderBottomColor:'darkcyan'},input:{backgroundColor:'darkgray',padding:15,borderRadius:5},loginButtonContainer:{elevation:8,backgroundColor:\"#009688\",borderRadius:28,paddingVertical:15,paddingHorizontal:25},loginButtonText:{fontSize:18,color:\"#fff\",fontWeight:\"bold\",alignSelf:\"center\",textTransform:\"uppercase\"}});","map":{"version":3,"sources":["D:/dev/appAmsree/App.js"],"names":["React","useState","useEffect","createStackNavigator","ClienteApp","RestauranteApp","setLogged","setUser","EstafetaApp","Provider","configStore","useDispatch","database","Restart","firebase","require","xmasPromo","newYearPromo","imgVegifruit","imgGreenCity","imgSaladasmais","imgQuichVeg","imgCremeEspi","imgSaladaQSerra","imgSandesBase","imgPratoCarne","imgPratoPeixe","favicon","images","users","store","firebaseConfig","apiKey","authDomain","projectId","storageBucket","databaseURL","messagingSenderId","appId","measurementId","initializeApp","db","AppWraper","route","AppTab","AppContent","isCliente","setIsCliente","isRestaurante","setIsRestaurante","isEstafeta","setIsEstafeta","toRegister","setToRegister","logged","getState","user","cartReducer","isLogged","Register","password","setPassword","confPass","setConfPass","setUsers","ref","once","then","res","val","styles","container","title","loginContainer","inputView","input","pass","containerRow","loginButtonContainer","tmpUsers","type","console","log","set","loginButtonText","Login","navigation","setIsLogged","dispatch","username","Object","keys","typeUser","restaurante","StyleSheet","create","backgroundColor","alignItems","flex","paddingTop","flexDirection","justifyContent","borderTopWidth","borderTopColor","fontSize","fontWeight","color","borderBottomWidth","borderBottomColor","padding","borderRadius","elevation","paddingVertical","paddingHorizontal","alignSelf","textTransform"],"mappings":"iEAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,C,uTAEA,OAASC,oBAAT,KAAqC,yBAArC,CACA,MAAOC,CAAAA,UAAP,wCACA,MAAOC,CAAAA,cAAP,+CACA,OAASC,SAAT,CAAoBC,OAApB,0BACA,MAAOC,CAAAA,WAAP,yCACA,OAASC,QAAT,KAAyB,aAAzB,CACA,MAAOC,CAAAA,WAAP,eACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,QAAT,KAAyB,cAAzB,CACA,OAASC,OAAT,KAAwB,sBAAxB,CACA,GAAIC,CAAAA,QAAQ,CAAGC,OAAO,CAAC,cAAD,CAAtB,CACAA,OAAO,CAAC,mBAAD,CAAP,CACA,GAAIC,CAAAA,SAAS,CAAGD,OAAO,0BAAvB,CACA,GAAIE,CAAAA,YAAY,CAAGF,OAAO,6BAA1B,CACA,GAAIG,CAAAA,YAAY,CAAGH,OAAO,0BAA1B,CACA,GAAII,CAAAA,YAAY,CAAGJ,OAAO,0BAA1B,CACA,GAAIK,CAAAA,cAAc,CAAGL,OAAO,4BAA5B,CACA,GAAIM,CAAAA,WAAW,CAAGN,OAAO,iCAAzB,CACA,GAAIO,CAAAA,YAAY,CAAGP,OAAO,kCAA1B,CACA,GAAIQ,CAAAA,eAAe,CAAGR,OAAO,kCAA7B,CACA,GAAIS,CAAAA,aAAa,CAAGT,OAAO,2BAA3B,CACA,GAAIU,CAAAA,aAAa,CAAGV,OAAO,2BAA3B,CACA,GAAIW,CAAAA,aAAa,CAAGX,OAAO,2BAA3B,CACA,GAAIY,CAAAA,OAAO,CAAGZ,OAAO,wBAArB,CACA,MAAO,IAAMa,CAAAA,MAAM,CAAG,CAClB,YAAaZ,SADK,CAElB,eAAgBC,YAFE,CAGlB,eAAgBC,YAHE,CAIlB,eAAgBC,YAJE,CAKlB,iBAAkBC,cALA,CAMlB,cAAeC,WANG,CAOlB,eAAgBC,YAPE,CAQlB,kBAAmBC,eARD,CASlB,gBAAiBC,aATC,CAUlB,gBAAiBC,aAVC,CAWlB,gBAAiBC,aAXC,CAYlB,UAAWC,OAZO,CAAf,CAeP,GAAME,CAAAA,KAAK,CAAG,CACV,UAAW,CACP,OAAQ,SADD,CAEP,WAAY,SAFL,CADD,CAKV,cAAe,CACX,OAAQ,aADG,CAEX,WAAY,aAFD,CAGX,cAAe,WAHJ,CALL,CAUV,WAAY,CACR,OAAQ,UADA,CAER,WAAY,UAFJ,CAGR,WAAY,CACR,CACI,KAAM,CADV,CAEI,cAAe,WAFnB,CAGI,SAAU,CAHd,CADQ,CAMR,CACI,KAAM,CADV,CAEI,cAAe,UAFnB,CAGI,SAAU,CAHd,CANQ,CAWR,CACI,KAAM,CADV,CAEI,cAAe,mCAFnB,CAGI,SAAU,CAHd,CAXQ,CAHJ,CAoBR,UAAW,CACP,CACI,KAAM,CADV,CAEI,cAAe,UAFnB,CAGI,QAAS,oBAHb,CAII,SAAU,8BAJd,CADO,CAQP,CACI,KAAM,CADV,CAEI,cAAe,WAFnB,CAGI,QAAS,2BAHb,CAII,SAAU,8BAJd,CARO,CAcP,CACI,KAAM,CADV,CAEI,cAAe,mCAFnB,CAGI,QAAS,iBAHb,CAII,SAAU,4BAJd,CAdO,CApBH,CAVF,CAAd,CAqDA,MAAO,IAAMC,CAAAA,KAAK,CAAGpB,WAAW,EAAzB,CAEP,GAAIqB,CAAAA,cAAc,CAAG,CACjBC,MAAM,CAAE,yCADS,CAEjBC,UAAU,CAAE,8BAFK,CAGjBC,SAAS,CAAE,cAHM,CAIjBC,aAAa,CAAE,0BAJE,CAKjBC,WAAW,CAAE,mDALI,CAMjBC,iBAAiB,CAAE,cANF,CAOjBC,KAAK,CAAE,2CAPU,CAQjBC,aAAa,CAAE,cARE,CAArB,CAYAzB,QAAQ,CAAC0B,aAAT,CAAuBT,cAAvB,EACA,MAAO,IAAMU,CAAAA,EAAE,CAAG3B,QAAQ,CAACF,QAAT,EAAX,CACP,cAAe,SAAS8B,CAAAA,SAAT,CAAmBC,KAAnB,CAA0B,CACrC,MACI,qBAAC,QAAD,EAAU,KAAK,CAAEb,KAAjB,EACI,oBAAC,UAAD,MADJ,CADJ,CAKH,CAID,GAAMc,CAAAA,MAAM,CAAGzC,oBAAoB,EAAnC,CAEA,QAAS0C,CAAAA,UAAT,EAAsB,eACgB5C,QAAQ,CAAC,KAAD,CADxB,wCACX6C,SADW,eACAC,YADA,8BAEwB9C,QAAQ,CAAC,KAAD,CAFhC,yCAEX+C,aAFW,eAEIC,gBAFJ,8BAGkBhD,QAAQ,CAAC,KAAD,CAH1B,yCAGXiD,UAHW,eAGCC,aAHD,8BAIkBlD,QAAQ,CAAC,KAAD,CAJ1B,yCAIXmD,UAJW,eAICC,aAJD,eAKlB,GAAIC,CAAAA,MAAM,CAAGxB,KAAK,CAACyB,QAAN,EAAb,CACA,GAAIC,CAAAA,IAAI,CAAGF,MAAM,CAACG,WAAP,CAAmBD,IAA9B,CACAF,MAAM,CAAGA,MAAM,CAACG,WAAP,CAAmBC,QAA5B,CACA,MAAQ,yCACHJ,MAAM,EACH,wCACKR,SAAS,EACN,oBAAC,UAAD,EAAY,WAAW,KAAvB,EAFR,CAIKE,aAAa,EACV,oBAAC,cAAD,EAAgB,WAAW,CAAEnB,KAAK,CAAC2B,IAAD,CAAlC,CAA0C,WAAW,KAArD,EALR,CAOKN,UAAU,EACP,oBAAC,WAAD,EAAa,QAAQ,CAAErB,KAAK,CAAC2B,IAAD,CAA5B,CAAoC,WAAW,KAA/C,EARR,CAFA,CAcH,CAACF,MAAD,EAAW,CAACF,UAAZ,EACG,oBAAC,KAAD,EAAO,IAAI,CAAEI,IAAb,CAAmB,OAAO,CAAEjD,OAA5B,CAAqC,YAAY,CAAEwC,YAAnD,CAAiE,gBAAgB,CAAEE,gBAAnF,CAAqG,aAAa,CAAEE,aAApH,CAAmI,aAAa,CAAEE,aAAlJ,EAfA,CAiBH,CAACC,MAAD,EAAWF,UAAX,EACG,oBAAC,QAAD,EAAU,aAAa,CAAEC,aAAzB,EAlBA,CAAR,CAqBH,CAED,QAASM,CAAAA,QAAT,MAAqC,IAAjBN,CAAAA,aAAiB,MAAjBA,aAAiB,gBACTpD,QAAQ,CAAC,EAAD,CADC,0CAC1BuD,IAD0B,gBACpBjD,OADoB,gCAEDN,QAAQ,CAAC,EAAD,CAFP,2CAE1B2D,QAF0B,gBAEhBC,WAFgB,gCAGD5D,QAAQ,CAAC,EAAD,CAHP,2CAG1B6D,QAH0B,gBAGhBC,WAHgB,gCAIP9D,QAAQ,CAAC,EAAD,CAJD,2CAI1B4B,KAJ0B,gBAInBmC,QAJmB,gBAKjC9D,SAAS,CAAC,UAAM,CACZY,QAAQ,CAACF,QAAT,GAAoBqD,GAApB,CAAwB,OAAxB,EAAiCC,IAAjC,CAAsC,OAAtC,EAA+CC,IAA/C,CAAoD,SAAAC,GAAG,QAAIJ,CAAAA,QAAQ,CAACI,GAAG,CAACC,GAAJ,EAAD,CAAZ,EAAvD,EACH,CAFQ,CAEN,EAFM,CAAT,CAGA,MACI,qBAAC,IAAD,EAAM,KAAK,CAAEC,MAAM,CAACC,SAApB,EACI,oBAAC,IAAD,EAAM,KAAK,CAAED,MAAM,CAACE,KAApB,cADJ,CAEI,oBAAC,IAAD,EAAM,KAAK,CAAEF,MAAM,CAACG,cAApB,EACI,oBAAC,IAAD,EAAM,KAAK,CAAEH,MAAM,CAACI,SAApB,EACI,oBAAC,SAAD,EAAW,WAAW,CAAC,UAAvB,CAAkC,KAAK,CAAEJ,MAAM,CAACK,KAAhD,CAAuD,YAAY,CAAE,sBAAAnB,IAAI,QAAIjD,CAAAA,OAAO,CAACiD,IAAD,CAAX,EAAzE,EADJ,CADJ,CAII,oBAAC,IAAD,EAAM,KAAK,CAAEc,MAAM,CAACI,SAApB,EACI,oBAAC,SAAD,EAAW,WAAW,CAAC,UAAvB,CAAkC,KAAK,CAAEJ,MAAM,CAACK,KAAhD,CAAuD,YAAY,CAAE,sBAAAC,IAAI,QAAIf,CAAAA,WAAW,CAACe,IAAD,CAAf,EAAzE,CAAgG,eAAe,KAA/G,EADJ,CAJJ,CAOI,oBAAC,IAAD,EAAM,KAAK,CAAEN,MAAM,CAACI,SAApB,EACI,oBAAC,SAAD,EAAW,WAAW,CAAC,kBAAvB,CAA0C,KAAK,CAAEJ,MAAM,CAACK,KAAxD,CAA+D,YAAY,CAAE,sBAAAC,IAAI,QAAIb,CAAAA,WAAW,CAACa,IAAD,CAAf,EAAjF,CAAwG,eAAe,KAAvH,EADJ,CAPJ,CAUI,oBAAC,IAAD,EAAM,KAAK,CAAEN,MAAM,CAACO,YAApB,EACI,oBAAC,gBAAD,EAAkB,KAAK,CAAEP,MAAM,CAACQ,oBAAhC,CAAsD,OAAO,CAAE,kBAAM,CACjE,GAAIlB,QAAQ,EAAIE,QAAhB,CAA0B,CACtB,GAAIiB,CAAAA,QAAQ,CAAGlD,KAAf,CACAkD,QAAQ,CAACvB,IAAD,CAAR,CAAgB,CAACwB,IAAI,CAAE,SAAP,CAAkBpB,QAAQ,CAACA,QAA3B,CAAhB,CACAqB,OAAO,CAACC,GAAR,CAAYH,QAAZ,EACAtC,EAAE,CAACwB,GAAH,CAAO,OAAP,EAAgBkB,GAAhB,CAAoBJ,QAApB,EACA1B,aAAa,CAAC,KAAD,CAAb,CACAxC,OAAO,GACV,CACJ,CATD,EAUI,oBAAC,IAAD,EAAM,KAAK,CAAEyD,MAAM,CAACc,eAApB,cAVJ,CADJ,CAVJ,CAFJ,CADJ,CA8BH,CAED,QAASC,CAAAA,KAAT,OAAyH,IAAxGC,CAAAA,UAAwG,OAAxGA,UAAwG,CAA5FC,WAA4F,OAA5FA,WAA4F,CAA/ExC,YAA+E,OAA/EA,YAA+E,CAAjEE,gBAAiE,OAAjEA,gBAAiE,CAA/CE,aAA+C,OAA/CA,aAA+C,CAAhCK,IAAgC,OAAhCA,IAAgC,CAA1BjD,OAA0B,OAA1BA,OAA0B,CAAjB8C,aAAiB,OAAjBA,aAAiB,iBACrFpD,QAAQ,CAAC,EAAD,CAD6E,2CAC9G2D,QAD8G,gBACpGC,WADoG,gCAE3F5D,QAAQ,CAAC,EAAD,CAFmF,2CAE9G4B,KAF8G,gBAEvGmC,QAFuG,gBAGrH,GAAMwB,CAAAA,QAAQ,CAAG7E,WAAW,EAA5B,CACAT,SAAS,CAAC,UAAM,CACZY,QAAQ,CAACF,QAAT,GAAoBqD,GAApB,CAAwB,OAAxB,EAAiCC,IAAjC,CAAsC,OAAtC,EAA+CC,IAA/C,CAAoD,SAAAC,GAAG,QAAIJ,CAAAA,QAAQ,CAACI,GAAG,CAACC,GAAJ,EAAD,CAAZ,EAAvD,EACH,CAFQ,CAEN,EAFM,CAAT,CAGA,MACI,qBAAC,IAAD,EAAM,KAAK,CAAEC,MAAM,CAACC,SAApB,EACI,oBAAC,IAAD,EAAM,KAAK,CAAED,MAAM,CAACE,KAApB,cADJ,CAEI,oBAAC,IAAD,EAAM,KAAK,CAAEF,MAAM,CAACG,cAApB,EACI,oBAAC,IAAD,EAAM,KAAK,CAAEH,MAAM,CAACI,SAApB,EACI,oBAAC,SAAD,EAAW,WAAW,CAAC,UAAvB,CAAkC,KAAK,CAAEJ,MAAM,CAACK,KAAhD,CAAuD,YAAY,CAAE,sBAAAc,QAAQ,QAAID,CAAAA,QAAQ,CAACjF,OAAO,CAACkF,QAAD,CAAR,CAAZ,EAA7E,EADJ,CADJ,CAII,oBAAC,IAAD,EAAM,KAAK,CAAEnB,MAAM,CAACI,SAApB,EACI,oBAAC,SAAD,EAAW,WAAW,CAAC,UAAvB,CAAkC,KAAK,CAAEJ,MAAM,CAACK,KAAhD,CAAuD,YAAY,CAAE,sBAAAC,IAAI,QAAIf,CAAAA,WAAW,CAACe,IAAD,CAAf,EAAzE,CAAgG,eAAe,KAA/G,EADJ,CAJJ,CAOI,oBAAC,IAAD,EAAM,KAAK,CAAEN,MAAM,CAACO,YAApB,EACI,oBAAC,gBAAD,EAAkB,KAAK,CAAEP,MAAM,CAACQ,oBAAhC,CAAsD,OAAO,CAAE,kBAAM,CAEjE,GAAIxB,CAAAA,MAAM,CAAGxB,KAAK,CAACyB,QAAN,EAAb,CACA,GAAIC,CAAAA,IAAI,CAAGF,MAAM,CAACG,WAAP,CAAmBD,IAA9B,CACAyB,OAAO,CAACC,GAAR,CAAY1B,IAAZ,EACA1C,QAAQ,CAACF,QAAT,GAAoBqD,GAApB,CAAwB,OAAxB,EAAiCC,IAAjC,CAAsC,OAAtC,EAA+CC,IAA/C,CAAoD,SAAAC,GAAG,QAAIJ,CAAAA,QAAQ,CAACI,GAAG,CAACC,GAAJ,EAAD,CAAZ,EAAvD,EACAY,OAAO,CAACC,GAAR,CAAYrD,KAAZ,EACA,0BAAqB6D,MAAM,CAACC,IAAP,CAAY9D,KAAZ,CAArB,8BAAK,GAAI+D,CAAAA,QAAQ,iBAAZ,CACD,GAAIpC,IAAI,GAAKoC,QAAb,CAAuB,CACnB,GAAGhC,QAAQ,GAAK/B,KAAK,CAAC2B,IAAD,CAAL,CAAYI,QAA5B,CACI,OAAQ/B,KAAK,CAAC2B,IAAD,CAAL,CAAYwB,IAApB,EACI,IAAK,SAAL,CACIQ,QAAQ,CAAClF,SAAS,CAAC,IAAD,CAAV,CAAR,CACAyC,YAAY,CAAC,IAAD,CAAZ,CACA,MACJ,IAAK,aAAL,CACIyC,QAAQ,CAAClF,SAAS,CAAC,IAAD,CAAV,CAAR,CACA2C,gBAAgB,CAAC,IAAD,CAAhB,CACA1C,OAAO,CAACsB,KAAK,CAAC2B,IAAD,CAAL,CAAYqC,WAAb,CAAP,CACA,MACJ,IAAK,UAAL,CACIL,QAAQ,CAAClF,SAAS,CAAC,IAAD,CAAV,CAAR,CACA6C,aAAa,CAAC,IAAD,CAAb,CACA,MACJ,QACI,MAfR,CAiBP,CApBL,CAqBH,CA5BD,EA6BI,oBAAC,IAAD,EAAM,KAAK,CAAEmB,MAAM,CAACc,eAApB,UA7BJ,CADJ,CAgCI,oBAAC,gBAAD,EAAkB,KAAK,CAAEd,MAAM,CAACQ,oBAAhC,CAAsD,OAAO,CAAE,kBAAM,CAAEzB,aAAa,CAAC,IAAD,CAAb,CAAqBmC,QAAQ,CAAClF,SAAS,CAAC,KAAD,CAAV,CAAR,CAA4B,CAAxH,EACI,oBAAC,IAAD,EAAM,KAAK,CAAEgE,MAAM,CAACc,eAApB,aADJ,CAhCJ,CAPJ,CAFJ,CADJ,CAiDH,CAED,GAAMd,CAAAA,MAAM,CAAGwB,UAAU,CAACC,MAAX,CAAkB,CAC7BxB,SAAS,CAAE,CACPyB,eAAe,CAAE,UADV,CAEPC,UAAU,CAAE,QAFL,CAGPC,IAAI,CAAE,CAHC,CADkB,CAO7BrB,YAAY,CAAE,CACVsB,UAAU,CAAE,EADF,CAEVC,aAAa,CAAE,KAFL,CAPe,CAW7B3B,cAAc,CAAE,CACZuB,eAAe,CAAE,UADL,CAEZC,UAAU,CAAE,QAFA,CAGZI,cAAc,CAAE,QAHJ,CAIZH,IAAI,CAAE,CAJM,CAXa,CAiB7B1B,KAAK,CAAE,CACH8B,cAAc,CAAE,GADb,CAEHC,cAAc,CAAE,UAFb,CAGHC,QAAQ,CAAE,EAHP,CAIHC,UAAU,CAAE,MAJT,CAKHC,KAAK,CAAE,UALJ,CAjBsB,CAwB7BhC,SAAS,CAAE,CACPiC,iBAAiB,CAAE,EADZ,CAEPC,iBAAiB,CAAE,UAFZ,CAxBkB,CA4B7BjC,KAAK,CAAE,CACHqB,eAAe,CAAE,UADd,CAEHa,OAAO,CAAE,EAFN,CAGHC,YAAY,CAAE,CAHX,CA5BsB,CAiC7BhC,oBAAoB,CAAE,CAClBiC,SAAS,CAAE,CADO,CAElBf,eAAe,CAAE,SAFC,CAGlBc,YAAY,CAAE,EAHI,CAIlBE,eAAe,CAAE,EAJC,CAKlBC,iBAAiB,CAAE,EALD,CAjCO,CAyC7B7B,eAAe,CAAE,CACboB,QAAQ,CAAE,EADG,CAEbE,KAAK,CAAE,MAFM,CAGbD,UAAU,CAAE,MAHC,CAIbS,SAAS,CAAE,QAJE,CAKbC,aAAa,CAAE,WALF,CAzCY,CAAlB,CAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { TextInput, StyleSheet, View, Text, TouchableOpacity } from 'react-native';\r\nimport { createStackNavigator } from '@react-navigation/stack';\r\nimport ClienteApp from './screens/AppCliente/AppClientes';\r\nimport RestauranteApp from './screens/AppRestaurante/AppRestaurante';\r\nimport { setLogged, setUser } from './assets/cartState';\r\nimport EstafetaApp from './screens/AppEstafeta/AppEstafeta';\r\nimport { Provider } from 'react-redux';\r\nimport configStore from './Store';\r\nimport { useDispatch } from 'react-redux';\r\nimport { database } from 'firebase/app';\r\nimport { Restart } from 'fiction-expo-restart';\r\nvar firebase = require('firebase/app');\r\nrequire('firebase/database');\r\nvar xmasPromo = require('./assets/xmaspromo.jpg');\r\nvar newYearPromo = require('./assets/newYearPromo.jpg');\r\nvar imgVegifruit = require('./assets/vegifruit.png');\r\nvar imgGreenCity = require('./assets/greencity.png');\r\nvar imgSaladasmais = require('./assets/saladasmais.jpg');\r\nvar imgQuichVeg = require('./assets/quicheVegsGluten.jpg');\r\nvar imgCremeEspi = require('./assets/cremedeespinafres.jpg');\r\nvar imgSaladaQSerra = require('./assets/saladaqueijoserra.jpg');\r\nvar imgSandesBase = require('./assets/sandesBase.jpg');\r\nvar imgPratoCarne = require('./assets/pratoCarne.jpg');\r\nvar imgPratoPeixe = require('./assets/pratoPeixe.jpg');\r\nvar favicon = require('./assets/favicon.png');\r\nexport const images = {\r\n    \"xmasPromo\": xmasPromo,\r\n    \"newYearPromo\": newYearPromo,\r\n    \"imgVegifruit\": imgVegifruit,\r\n    \"imgGreenCity\": imgGreenCity,\r\n    \"imgSaladasmais\": imgSaladasmais,\r\n    \"imgQuichVeg\": imgQuichVeg,\r\n    \"imgCremeEspi\": imgCremeEspi,\r\n    \"imgSaladaQSerra\": imgSaladaQSerra,\r\n    \"imgSandesBase\": imgSandesBase,\r\n    \"imgPratoCarne\": imgPratoCarne,\r\n    \"imgPratoPeixe\": imgPratoPeixe,\r\n    \"default\": favicon\r\n}\r\n\r\nconst users = {\r\n    \"cliente\": {\r\n        \"type\": \"cliente\",\r\n        \"password\": \"cliente\",\r\n    },\r\n    \"restaurante\": {\r\n        \"type\": \"restaurante\",\r\n        \"password\": \"restaurante\",\r\n        \"restaurante\": \"Vegifruit\"\r\n    },\r\n    \"estafeta\": {\r\n        \"type\": \"estafeta\",\r\n        \"password\": \"estafeta\",\r\n        \"feedback\": [\r\n            {\r\n                \"id\": 1,\r\n                \"restaurante\": \"Vegifruit\",\r\n                \"rating\": 5\r\n            },\r\n            {\r\n                \"id\": 2,\r\n                \"restaurante\": \"Saladas+\",\r\n                \"rating\": 4\r\n            },\r\n            {\r\n                \"id\": 3,\r\n                \"restaurante\": \"Green City quiches & saladas, co.\",\r\n                \"rating\": 4\r\n            },\r\n        ],\r\n        \"pedidos\": [\r\n            {\r\n                \"id\": 1,\r\n                \"restaurante\": \"Saladas+\",\r\n                \"prato\": \"Prato do dia Peixe\",\r\n                \"morada\": \"Universidade de Aveiro, DECA\"\r\n            },\r\n\r\n            {\r\n                \"id\": 2,\r\n                \"restaurante\": \"Vegifruit\",\r\n                \"prato\": \"Salada de queijo da serra\",\r\n                \"morada\": \"Universidade de Aveiro, DETI\"\r\n            },\r\n            {\r\n                \"id\": 3,\r\n                \"restaurante\": \"Green City quiches & saladas, co.\",\r\n                \"prato\": \"Quiche especial\",\r\n                \"morada\": \"Universidade de Aveiro, CP\"\r\n            },\r\n        ]\r\n    },\r\n}\r\nexport const store = configStore();\r\n\r\nvar firebaseConfig = {\r\n    apiKey: \"AIzaSyDNVW5qZxXnfqYfnNUvpFUH9dAeQfRmHu4\",\r\n    authDomain: \"appams-f22a3.firebaseapp.com\",\r\n    projectId: \"appams-f22a3\",\r\n    storageBucket: \"appams-f22a3.appspot.com\",\r\n    databaseURL: \"https://appams-f22a3-default-rtdb.firebaseio.com/\",\r\n    messagingSenderId: \"184182571952\",\r\n    appId: \"1:184182571952:web:576eed43083fbf07fc8c75\",\r\n    measurementId: \"G-CHN6Z9P409\"\r\n};\r\n// Initialize Firebase\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\nexport const db = firebase.database();\r\nexport default function AppWraper(route) {\r\n    return (\r\n        <Provider store={store}>\r\n            <AppContent />\r\n        </Provider>\r\n    );\r\n}\r\n\r\n\r\n\r\nconst AppTab = createStackNavigator();\r\n\r\nfunction AppContent() {\r\n    const [isCliente, setIsCliente] = useState(false);\r\n    const [isRestaurante, setIsRestaurante] = useState(false);\r\n    const [isEstafeta, setIsEstafeta] = useState(false);\r\n    const [toRegister, setToRegister] = useState(false);\r\n    let logged = store.getState();\r\n    let user = logged.cartReducer.user;\r\n    logged = logged.cartReducer.isLogged;\r\n    return (<>\r\n        {logged &&\r\n            <>\r\n                {isCliente &&\r\n                    <ClienteApp setIsLogged />\r\n                }\r\n                {isRestaurante &&\r\n                    <RestauranteApp restaurante={users[user]} setIsLogged />\r\n                }\r\n                {isEstafeta &&\r\n                    <EstafetaApp estafeta={users[user]} setIsLogged />\r\n                }\r\n            </>\r\n        }\r\n        {!logged && !toRegister &&\r\n            <Login user={user} setUser={setUser} setIsCliente={setIsCliente} setIsRestaurante={setIsRestaurante} setIsEstafeta={setIsEstafeta} setToRegister={setToRegister} />\r\n        }\r\n        {!logged && toRegister &&\r\n            <Register setToRegister={setToRegister} />\r\n        }\r\n    </>);\r\n}\r\n\r\nfunction Register({ setToRegister }) {\r\n    const [user, setUser] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const [confPass, setConfPass] = useState(\"\");\r\n    const [users, setUsers] = useState({});\r\n    useEffect(() => {\r\n        firebase.database().ref(\"Users\").once('value').then(res => setUsers(res.val()));\r\n    }, []);\r\n    return (\r\n        <View style={styles.container}>\r\n            <Text style={styles.title}>Nutrilink</Text>\r\n            <View style={styles.loginContainer}>\r\n                <View style={styles.inputView}>\r\n                    <TextInput placeholder='Username' style={styles.input} onChangeText={user => setUser(user)} />\r\n                </View>\r\n                <View style={styles.inputView}>\r\n                    <TextInput placeholder='Password' style={styles.input} onChangeText={pass => setPassword(pass)} secureTextEntry />\r\n                </View>\r\n                <View style={styles.inputView}>\r\n                    <TextInput placeholder='Confirm Password' style={styles.input} onChangeText={pass => setConfPass(pass)} secureTextEntry />\r\n                </View>\r\n                <View style={styles.containerRow}>\r\n                    <TouchableOpacity style={styles.loginButtonContainer} onPress={() => {\r\n                        if (password == confPass) {\r\n                            let tmpUsers = users\r\n                            tmpUsers[user]= {type: 'cliente', password:password};\r\n                            console.log(tmpUsers);\r\n                            db.ref(\"Users\").set(tmpUsers);\r\n                            setToRegister(false);\r\n                            Restart();\r\n                        }\r\n                    }}>\r\n                        <Text style={styles.loginButtonText}>Confirmar</Text>\r\n                    </TouchableOpacity>\r\n                </View>\r\n            </View>\r\n        </View>\r\n    );\r\n}\r\n\r\nfunction Login({ navigation, setIsLogged, setIsCliente, setIsRestaurante, setIsEstafeta, user, setUser, setToRegister }) {\r\n    const [password, setPassword] = useState(\"\");\r\n    const [users, setUsers] = useState({});\r\n    const dispatch = useDispatch();\r\n    useEffect(() => {\r\n        firebase.database().ref(\"Users\").once('value').then(res => setUsers(res.val()));\r\n    }, []);\r\n    return (\r\n        <View style={styles.container}>\r\n            <Text style={styles.title}>Nutrilink</Text>\r\n            <View style={styles.loginContainer}>\r\n                <View style={styles.inputView}>\r\n                    <TextInput placeholder='Username' style={styles.input} onChangeText={username => dispatch(setUser(username))} />\r\n                </View>\r\n                <View style={styles.inputView}>\r\n                    <TextInput placeholder='Password' style={styles.input} onChangeText={pass => setPassword(pass)} secureTextEntry />\r\n                </View>\r\n                <View style={styles.containerRow}>\r\n                    <TouchableOpacity style={styles.loginButtonContainer} onPress={() => {\r\n\r\n                        let logged = store.getState();\r\n                        let user = logged.cartReducer.user;\r\n                        console.log(user)\r\n                        firebase.database().ref(\"Users\").once('value').then(res => setUsers(res.val()));\r\n                        console.log(users);\r\n                        for (let typeUser of Object.keys(users))\r\n                            if (user === typeUser) {\r\n                                if(password === users[user].password)\r\n                                    switch (users[user].type) {\r\n                                        case \"cliente\":\r\n                                            dispatch(setLogged(true));\r\n                                            setIsCliente(true);\r\n                                            break;\r\n                                        case \"restaurante\":\r\n                                            dispatch(setLogged(true));\r\n                                            setIsRestaurante(true);\r\n                                            setUser(users[user].restaurante);\r\n                                            break;\r\n                                        case \"estafeta\":\r\n                                            dispatch(setLogged(true));\r\n                                            setIsEstafeta(true);\r\n                                            break;\r\n                                        default:\r\n                                            break;\r\n                                    }\r\n                            }\r\n                    }}>\r\n                        <Text style={styles.loginButtonText}>Login</Text>\r\n                    </TouchableOpacity>\r\n                    <TouchableOpacity style={styles.loginButtonContainer} onPress={() => { setToRegister(true); dispatch(setLogged(false)) }}>\r\n                        <Text style={styles.loginButtonText}>Registar</Text>\r\n                    </TouchableOpacity>\r\n                </View>\r\n            </View>\r\n        </View>\r\n    );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        backgroundColor: 'darkcyan',\r\n        alignItems: 'center',\r\n        flex: 1\r\n\r\n    },\r\n    containerRow: {\r\n        paddingTop: 20,\r\n        flexDirection: 'row'\r\n    },\r\n    loginContainer: {\r\n        backgroundColor: 'darkcyan',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        flex: 1\r\n    },\r\n    title: {\r\n        borderTopWidth: 100,\r\n        borderTopColor: 'darkcyan',\r\n        fontSize: 40,\r\n        fontWeight: 'bold',\r\n        color: 'cornsilk'\r\n    },\r\n    inputView: {\r\n        borderBottomWidth: 10,\r\n        borderBottomColor: 'darkcyan'\r\n    },\r\n    input: {\r\n        backgroundColor: 'darkgray',\r\n        padding: 15,\r\n        borderRadius: 5,\r\n    },\r\n    loginButtonContainer: {\r\n        elevation: 8,\r\n        backgroundColor: \"#009688\",\r\n        borderRadius: 28,\r\n        paddingVertical: 15,\r\n        paddingHorizontal: 25,\r\n\r\n    },\r\n    loginButtonText: {\r\n        fontSize: 18,\r\n        color: \"#fff\",\r\n        fontWeight: \"bold\",\r\n        alignSelf: \"center\",\r\n        textTransform: \"uppercase\"\r\n    }\r\n});"]},"metadata":{},"sourceType":"module"}