{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useState,useEffect}from'react';import Icon from\"@expo/vector-icons/Ionicons\";import Icon2 from\"@expo/vector-icons/MaterialCommunityIcons\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import Image from\"react-native-web/dist/exports/Image\";import TouchableHighlight from\"react-native-web/dist/exports/TouchableHighlight\";import Button from\"react-native-web/dist/exports/Button\";import{store,db,images}from\"../../App\";export default function Orders(_ref){var route=_ref.route;var user=store.getState().cartReducer.user;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),pedidos=_useState2[0],setPedidos=_useState2[1];getRestaurante(user,setPedidos);if(pedidos==null||Object.keys(pedidos).length==0)return React.createElement(View,null,React.createElement(Text,{style:styles.restaurantesOffer},\"N\\xE3o h\\xE1 pedidos de momento!\"));return React.createElement(View,{style:{flex:1}},React.createElement(Text,{style:styles.restaurantesOffer},\"Pedidos:\"),React.createElement(ScrollView,null,Object.keys(pedidos).map(function(pedidoI){return React.createElement(View,{style:styles.button,key:pedidos[pedidoI].Id},React.createElement(View,{style:styles.containerRow},React.createElement(Icon2,{name:\"new-box\",size:50,style:{alignSelf:'center',paddingHorizontal:20}}),React.createElement(View,{style:styles.containerColumn},React.createElement(Text,{style:styles.restaurantesOffer},pedidos[pedidoI].Morada),React.createElement(Text,{style:styles.foodText},\"Pratos : \"),React.createElement(View,{style:styles.containerRow},pedidos[pedidoI].Pratos.map(function(prato){return React.createElement(View,{key:pedidos[pedidoI].Id},React.createElement(Text,{style:{paddingLeft:10}},prato));})),React.createElement(View,{style:styles.containerRow},React.createElement(Text,null,\"Status:\",'\\n'),React.createElement(Text,{style:{paddingLeft:10}},pedidos[pedidoI].Status)),pedidos[pedidoI].Restaurante&&React.createElement(View,{style:styles.containerRow},React.createElement(Text,null,\"Restaurante:\",'\\n'),React.createElement(Text,{style:{paddingLeft:10}},pedidos[pedidoI].Restaurante)),pedidos[pedidoI].Estafeta&&React.createElement(View,{style:styles.containerRow},React.createElement(Text,null,\"Estafeta:\",'\\n'),React.createElement(Text,{style:{paddingLeft:10}},pedidos[pedidoI].Estafeta)),React.createElement(View,{style:styles.containerRow},!pedidos[pedidoI].Estafeta&&React.createElement(TouchableHighlight,{underlayColor:\"#DDDDDD\",activeOpacity:0.3,style:styles.button,onPress:function onPress(){var tmpPedido=pedidos[pedidoI];tmpPedido.Status=\"A entregar\";tmpPedido.Estafeta=user;db.ref(\"/Pedidos/\"+pedidoI).set(tmpPedido);db.ref(\"/restaurantes/\"+pedidos[pedidoI].Restaurante+\"/pedidos/\"+pedidos[pedidoI].Id).set(tmpPedido);}},React.createElement(Icon2,{name:\"check-bold\",size:15,style:{borderRightWidth:5,borderRightColor:'rgba(0,0,0,0)'}})),pedidos[pedidoI].Estafeta&&pedidos[pedidoI].Status!=\"Entregue\"&&React.createElement(TouchableHighlight,{underlayColor:\"#DDDDDD\",activeOpacity:0.3,style:styles.button,onPress:function onPress(){var tmpPedido=pedidos[pedidoI];tmpPedido.Status=\"Entregue\";db.ref(\"/Pedidos/\"+pedidoI).set(tmpPedido);db.ref(\"/restaurantes/\"+pedidos[pedidoI].Restaurante+\"/pedidos/\"+pedidos[pedidoI].Id).set(tmpPedido);}},React.createElement(Text,null,\"Finalizar Encomenda!\"))))));})));}function getRestaurante(user,setPedidos){return _regeneratorRuntime.async(function getRestaurante$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regeneratorRuntime.awrap(db.ref(\"Pedidos\").once('value').then(function(res){setPedidos(res.val());}));case 2:case\"end\":return _context.stop();}}},null,null,null,Promise);}var styles=StyleSheet.create({containerRow:{paddingBottom:10,flexDirection:'row'},containerColumn:{paddingLeft:10,paddingBottom:10,flexDirection:'column'},restaurantesOffer:{fontSize:15,fontWeight:'bold',textAlign:'left',color:'black'},foodText:{fontSize:12,textAlign:'left'},button:{padding:7},image:{width:150,height:100}});","map":{"version":3,"sources":["D:/dev/appAmsree/screens/AppEstafeta/Orders.js"],"names":["React","useState","useEffect","Icon","Icon2","store","db","images","Orders","route","user","getState","cartReducer","pedidos","setPedidos","getRestaurante","Object","keys","length","styles","restaurantesOffer","flex","map","pedidoI","button","Id","containerRow","alignSelf","paddingHorizontal","containerColumn","Morada","foodText","Pratos","prato","paddingLeft","Status","Restaurante","Estafeta","tmpPedido","ref","set","borderRightWidth","borderRightColor","once","then","res","val","StyleSheet","create","paddingBottom","flexDirection","fontSize","fontWeight","textAlign","color","padding","image","width","height"],"mappings":"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","sourcesContent":["\r\nimport React, { useState, useEffect } from 'react';\r\nimport Icon from 'react-native-vector-icons/Ionicons';\r\nimport Icon2 from 'react-native-vector-icons/MaterialCommunityIcons';\r\nimport { StyleSheet, Text, View, ScrollView, Image, TouchableHighlight, Button } from 'react-native';\r\nimport { store, db, images } from '../../App';\r\n\r\nexport default function Orders({ route }) {\r\n    let user = store.getState().cartReducer.user;\r\n    const [pedidos, setPedidos] = useState({});\r\n    getRestaurante(user, setPedidos);\r\n    if (pedidos == null || Object.keys(pedidos).length == 0) return (<View><Text style={styles.restaurantesOffer}>Não há pedidos de momento!</Text></View>);\r\n    return (\r\n        <View style={{flex: 1}}>\r\n            <Text style={styles.restaurantesOffer}>Pedidos:</Text>\r\n            <ScrollView>{\r\n                Object.keys(pedidos).map(pedidoI => {\r\n                    return (\r\n                        <View style={styles.button} key={pedidos[pedidoI].Id}>\r\n                            <View style={styles.containerRow}>\r\n                                <Icon2 name=\"new-box\" size={50} style={{ alignSelf: 'center', paddingHorizontal: 20 }} />\r\n                                <View style={styles.containerColumn}>\r\n                                    <Text style={styles.restaurantesOffer}>{pedidos[pedidoI].Morada}</Text>\r\n                                    <Text style={styles.foodText}>Pratos : </Text>\r\n                                    <View style={styles.containerRow}>{\r\n                                        pedidos[pedidoI].Pratos.map(\r\n                                            (prato) => {\r\n                                                return (\r\n                                                    <View key={pedidos[pedidoI].Id}>\r\n                                                        <Text style={{ paddingLeft: 10 }}>{prato}</Text>\r\n                                                    </View>);\r\n                                            }\r\n                                        )\r\n                                    }\r\n                                    </View>\r\n                                    <View style={styles.containerRow}>\r\n                                        <Text>Status:{'\\n'}</Text>\r\n                                        <Text style={{ paddingLeft: 10 }}>{pedidos[pedidoI].Status}</Text>\r\n                                    </View>\r\n                                    {pedidos[pedidoI].Restaurante &&\r\n                                        <View style={styles.containerRow}>\r\n                                            <Text>Restaurante:{'\\n'}</Text>\r\n                                            <Text style={{ paddingLeft: 10 }}>{pedidos[pedidoI].Restaurante}</Text>\r\n                                        </View>\r\n                                    }\r\n                                    {pedidos[pedidoI].Estafeta &&\r\n                                        <View style={styles.containerRow}>\r\n                                            <Text>Estafeta:{'\\n'}</Text>\r\n                                            <Text style={{ paddingLeft: 10 }}>{pedidos[pedidoI].Estafeta}</Text>\r\n                                        </View>\r\n                                    }\r\n                                    <View style={styles.containerRow}>\r\n                                        {!pedidos[pedidoI].Estafeta && <TouchableHighlight underlayColor={\"#DDDDDD\"} activeOpacity={0.3} style={styles.button} onPress={() => {\r\n                                            let tmpPedido = pedidos[pedidoI]\r\n                                            tmpPedido.Status = \"A entregar\";\r\n                                            tmpPedido.Estafeta = user;\r\n                                            db.ref(\"/Pedidos/\" + pedidoI).set(tmpPedido);\r\n                                            db.ref(\"/restaurantes/\" + pedidos[pedidoI].Restaurante + \"/pedidos/\" + pedidos[pedidoI].Id).set(tmpPedido);\r\n                                        }}>\r\n                                            <Icon2 name=\"check-bold\" size={15} style={{ borderRightWidth: 5, borderRightColor: 'rgba(0,0,0,0)' }} />\r\n                                        </TouchableHighlight>}\r\n                                        {pedidos[pedidoI].Estafeta && pedidos[pedidoI].Status != \"Entregue\" && <TouchableHighlight underlayColor={\"#DDDDDD\"} activeOpacity={0.3} style={styles.button} onPress={() => {\r\n                                            let tmpPedido = pedidos[pedidoI]\r\n                                            tmpPedido.Status = \"Entregue\";\r\n                                            db.ref(\"/Pedidos/\" + pedidoI).set(tmpPedido);\r\n                                            db.ref(\"/restaurantes/\" + pedidos[pedidoI].Restaurante + \"/pedidos/\" + pedidos[pedidoI].Id).set(tmpPedido);\r\n                                        }}>\r\n                                            <Text>Finalizar Encomenda!</Text>\r\n                                        </TouchableHighlight>}\r\n                                    </View>\r\n                                </View>\r\n                            </View>\r\n                        </View>\r\n                    );\r\n                })\r\n            }</ScrollView>\r\n        </View>\r\n\r\n    );\r\n}\r\n\r\n\r\nasync function getRestaurante(user, setPedidos) {\r\n    await db.ref(\"Pedidos\").once('value').then(res => { setPedidos(res.val()); });\r\n}\r\n\r\n\r\nconst styles = StyleSheet.create({\r\n    containerRow: {\r\n        paddingBottom: 10,\r\n        flexDirection: 'row'\r\n    },\r\n    containerColumn: {\r\n        paddingLeft: 10,\r\n        paddingBottom: 10,\r\n        flexDirection: 'column'\r\n    },\r\n    restaurantesOffer: {\r\n        fontSize: 15,\r\n        fontWeight: 'bold',\r\n        textAlign: 'left',\r\n        color: 'black'\r\n    },\r\n    foodText: {\r\n        fontSize: 12,\r\n        textAlign: 'left',\r\n\r\n    },\r\n    button: {\r\n        padding: 7,\r\n    },\r\n    image: {\r\n        width: 150,\r\n        height: 100,\r\n    }\r\n});"]},"metadata":{},"sourceType":"module"}