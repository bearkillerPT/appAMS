{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useState,useEffect}from'react';import TextInput from\"react-native-web/dist/exports/TextInput\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import{createStackNavigator}from'@react-navigation/stack';import ClienteApp from\"./screens/AppCliente/AppClientes\";import RestauranteApp from\"./screens/AppRestaurante/AppRestaurante\";import{setLogged,setUser}from\"./assets/cartState\";import EstafetaApp from\"./screens/AppEstafeta/AppEstafeta\";import{Provider}from'react-redux';import configStore from\"./Store\";import{useDispatch}from'react-redux';import{database}from'firebase/app';var firebase=require('firebase/app');require('firebase/database');var xmasPromo=require(\"./assets/xmaspromo.jpg\");var newYearPromo=require(\"./assets/newYearPromo.jpg\");var imgVegifruit=require(\"./assets/vegifruit.png\");var imgGreenCity=require(\"./assets/greencity.png\");var imgSaladasmais=require(\"./assets/saladasmais.jpg\");var imgQuichVeg=require(\"./assets/quicheVegsGluten.jpg\");var imgCremeEspi=require(\"./assets/cremedeespinafres.jpg\");var imgSaladaQSerra=require(\"./assets/saladaqueijoserra.jpg\");var imgSandesBase=require(\"./assets/sandesBase.jpg\");var imgPratoCarne=require(\"./assets/pratoCarne.jpg\");var imgPratoPeixe=require(\"./assets/pratoPeixe.jpg\");var favicon=require(\"./assets/favicon.png\");export var images={\"xmasPromo\":xmasPromo,\"newYearPromo\":newYearPromo,\"imgVegifruit\":imgVegifruit,\"imgGreenCity\":imgGreenCity,\"imgSaladasmais\":imgSaladasmais,\"imgQuichVeg\":imgQuichVeg,\"imgCremeEspi\":imgCremeEspi,\"imgSaladaQSerra\":imgSaladaQSerra,\"imgSandesBase\":imgSandesBase,\"imgPratoCarne\":imgPratoCarne,\"imgPratoPeixe\":imgPratoPeixe,\"default\":favicon};var users={\"cliente\":{\"type\":\"cliente\",\"password\":\"cliente\"},\"restaurante\":{\"type\":\"restaurante\",\"password\":\"restaurante\",\"restaurante\":\"Vegifruit\"},\"estafeta\":{\"type\":\"estafeta\",\"password\":\"estafeta\",\"feedback\":[{\"id\":1,\"restaurante\":\"Vegifruit\",\"rating\":5},{\"id\":2,\"restaurante\":\"Saladas+\",\"rating\":4},{\"id\":3,\"restaurante\":\"Green City quiches & saladas, co.\",\"rating\":4}],\"pedidos\":[{\"id\":1,\"restaurante\":\"Saladas+\",\"prato\":\"Prato do dia Peixe\",\"morada\":\"Universidade de Aveiro, DECA\"},{\"id\":2,\"restaurante\":\"Vegifruit\",\"prato\":\"Salada de queijo da serra\",\"morada\":\"Universidade de Aveiro, DETI\"},{\"id\":3,\"restaurante\":\"Green City quiches & saladas, co.\",\"prato\":\"Quiche especial\",\"morada\":\"Universidade de Aveiro, CP\"}]}};export var store=configStore();var firebaseConfig={apiKey:\"AIzaSyDNVW5qZxXnfqYfnNUvpFUH9dAeQfRmHu4\",authDomain:\"appams-f22a3.firebaseapp.com\",projectId:\"appams-f22a3\",storageBucket:\"appams-f22a3.appspot.com\",databaseURL:\"https://appams-f22a3-default-rtdb.firebaseio.com/\",messagingSenderId:\"184182571952\",appId:\"1:184182571952:web:576eed43083fbf07fc8c75\",measurementId:\"G-CHN6Z9P409\"};firebase.initializeApp(firebaseConfig);export var db=firebase.database();export default function AppWraper(route){return React.createElement(Provider,{store:store},React.createElement(AppContent,null));}var AppTab=createStackNavigator();function AppContent(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isCliente=_useState2[0],setIsCliente=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isRestaurante=_useState4[0],setIsRestaurante=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isEstafeta=_useState6[0],setIsEstafeta=_useState6[1];var logged=store.getState();var user=logged.cartReducer.user;logged=logged.cartReducer.isLogged;return React.createElement(React.Fragment,null,logged&&React.createElement(React.Fragment,null,isCliente&&React.createElement(ClienteApp,{setIsLogged:true}),isRestaurante&&React.createElement(RestauranteApp,{restaurante:users[user],setIsLogged:true}),isEstafeta&&React.createElement(EstafetaApp,{estafeta:users[user],setIsLogged:true})),!logged&&React.createElement(Login,{user:user,setUser:setUser,setIsCliente:setIsCliente,setIsRestaurante:setIsRestaurante,setIsEstafeta:setIsEstafeta}));}function Login(_ref){var navigation=_ref.navigation,setIsLogged=_ref.setIsLogged,setIsCliente=_ref.setIsCliente,setIsRestaurante=_ref.setIsRestaurante,setIsEstafeta=_ref.setIsEstafeta,user=_ref.user,setUser=_ref.setUser;var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),password=_useState8[0],setPassword=_useState8[1];var _useState9=useState({}),_useState10=_slicedToArray(_useState9,2),users=_useState10[0],setUsers=_useState10[1];var dispatch=useDispatch();useEffect(function(){firebase.database().ref(\"Users\").once('value').then(function(res){return setUsers(res.val());});},[]);return React.createElement(View,{style:styles.container},React.createElement(Text,{style:styles.title},\"Nutrilink\"),React.createElement(View,{style:styles.loginContainer},React.createElement(View,{style:styles.inputView},React.createElement(TextInput,{placeholder:\"Username\",style:styles.input,onChangeText:function onChangeText(username){return dispatch(setUser(username));}})),React.createElement(View,{style:styles.inputView},React.createElement(TextInput,{placeholder:\"Password\",style:styles.input,onChangeText:function onChangeText(pass){return setPassword(pass);},secureTextEntry:true})),React.createElement(View,{style:styles.containerRow},React.createElement(TouchableOpacity,{style:styles.loginButtonContainer,onPress:function onPress(){var logged=store.getState();var user=logged.cartReducer.user;console.log(user);firebase.database().ref(\"Users\").once('value').then(function(res){return setUsers(res.val());});console.log(users);for(var _i=0,_Object$keys=Object.keys(users);_i<_Object$keys.length;_i++){var typeUser=_Object$keys[_i];if(user===typeUser){switch(users[user].type){case\"cliente\":dispatch(setLogged(true));setIsCliente(true);break;case\"restaurante\":dispatch(setLogged(true));setIsRestaurante(true);setUser(users[user].restaurante);break;case\"estafeta\":dispatch(setLogged(true));setIsEstafeta(true);break;default:break;}}}}},React.createElement(Text,{style:styles.loginButtonText},\"Login\")),React.createElement(TouchableOpacity,{style:styles.loginButtonContainer},React.createElement(Text,{style:styles.loginButtonText},\"Registar\")))));}var styles=StyleSheet.create({container:{backgroundColor:'darkcyan',alignItems:'center',flex:1},containerRow:{paddingTop:20,flexDirection:'row'},loginContainer:{backgroundColor:'darkcyan',alignItems:'center',justifyContent:'center',flex:1},title:{borderTopWidth:100,borderTopColor:'darkcyan',fontSize:40,fontWeight:'bold',color:'cornsilk'},inputView:{borderBottomWidth:10,borderBottomColor:'darkcyan'},input:{backgroundColor:'darkgray',padding:15,borderRadius:5},loginButtonContainer:{elevation:8,backgroundColor:\"#009688\",borderRadius:28,paddingVertical:15,paddingHorizontal:25},loginButtonText:{fontSize:18,color:\"#fff\",fontWeight:\"bold\",alignSelf:\"center\",textTransform:\"uppercase\"}});","map":{"version":3,"sources":["D:/dev/appAmsree/App.js"],"names":["React","useState","useEffect","createStackNavigator","ClienteApp","RestauranteApp","setLogged","setUser","EstafetaApp","Provider","configStore","useDispatch","database","firebase","require","xmasPromo","newYearPromo","imgVegifruit","imgGreenCity","imgSaladasmais","imgQuichVeg","imgCremeEspi","imgSaladaQSerra","imgSandesBase","imgPratoCarne","imgPratoPeixe","favicon","images","users","store","firebaseConfig","apiKey","authDomain","projectId","storageBucket","databaseURL","messagingSenderId","appId","measurementId","initializeApp","db","AppWraper","route","AppTab","AppContent","isCliente","setIsCliente","isRestaurante","setIsRestaurante","isEstafeta","setIsEstafeta","logged","getState","user","cartReducer","isLogged","Login","navigation","setIsLogged","password","setPassword","setUsers","dispatch","ref","once","then","res","val","styles","container","title","loginContainer","inputView","input","username","pass","containerRow","loginButtonContainer","console","log","Object","keys","typeUser","type","restaurante","loginButtonText","StyleSheet","create","backgroundColor","alignItems","flex","paddingTop","flexDirection","justifyContent","borderTopWidth","borderTopColor","fontSize","fontWeight","color","borderBottomWidth","borderBottomColor","padding","borderRadius","elevation","paddingVertical","paddingHorizontal","alignSelf","textTransform"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { TextInput, StyleSheet, View, Text, TouchableOpacity } from 'react-native';\r\nimport { createStackNavigator } from '@react-navigation/stack';\r\nimport ClienteApp from './screens/AppCliente/AppClientes';\r\nimport RestauranteApp from './screens/AppRestaurante/AppRestaurante';\r\nimport { setLogged, setUser } from './assets/cartState';\r\nimport EstafetaApp from './screens/AppEstafeta/AppEstafeta';\r\nimport { Provider } from 'react-redux';\r\nimport configStore from './Store';\r\nimport { useDispatch } from 'react-redux';\r\nimport { database } from 'firebase/app';\r\nvar firebase = require('firebase/app');\r\nrequire('firebase/database');\r\nvar xmasPromo = require('./assets/xmaspromo.jpg');\r\nvar newYearPromo = require('./assets/newYearPromo.jpg');\r\nvar imgVegifruit = require('./assets/vegifruit.png');\r\nvar imgGreenCity = require('./assets/greencity.png');\r\nvar imgSaladasmais = require('./assets/saladasmais.jpg');\r\nvar imgQuichVeg = require('./assets/quicheVegsGluten.jpg');\r\nvar imgCremeEspi = require('./assets/cremedeespinafres.jpg');\r\nvar imgSaladaQSerra = require('./assets/saladaqueijoserra.jpg');\r\nvar imgSandesBase = require('./assets/sandesBase.jpg');\r\nvar imgPratoCarne = require('./assets/pratoCarne.jpg');\r\nvar imgPratoPeixe = require('./assets/pratoPeixe.jpg');\r\nvar favicon = require('./assets/favicon.png');\r\nexport const images = {\r\n    \"xmasPromo\": xmasPromo,\r\n    \"newYearPromo\": newYearPromo,\r\n    \"imgVegifruit\": imgVegifruit,\r\n    \"imgGreenCity\": imgGreenCity,\r\n    \"imgSaladasmais\": imgSaladasmais,\r\n    \"imgQuichVeg\": imgQuichVeg,\r\n    \"imgCremeEspi\": imgCremeEspi,\r\n    \"imgSaladaQSerra\": imgSaladaQSerra,\r\n    \"imgSandesBase\": imgSandesBase,\r\n    \"imgPratoCarne\": imgPratoCarne,\r\n    \"imgPratoPeixe\": imgPratoPeixe,\r\n    \"default\": favicon\r\n}\r\n\r\nconst users = {\r\n    \"cliente\": {\r\n        \"type\": \"cliente\",\r\n        \"password\": \"cliente\",\r\n    },\r\n    \"restaurante\": {\r\n        \"type\": \"restaurante\",\r\n        \"password\": \"restaurante\",\r\n        \"restaurante\": \"Vegifruit\"\r\n    },\r\n    \"estafeta\": {\r\n        \"type\": \"estafeta\",\r\n        \"password\": \"estafeta\",\r\n        \"feedback\": [\r\n            {\r\n                \"id\": 1,\r\n                \"restaurante\": \"Vegifruit\",\r\n                \"rating\": 5\r\n            },\r\n            {\r\n                \"id\": 2,\r\n                \"restaurante\": \"Saladas+\",\r\n                \"rating\": 4\r\n            },\r\n            {\r\n                \"id\": 3,\r\n                \"restaurante\": \"Green City quiches & saladas, co.\",\r\n                \"rating\": 4\r\n            },\r\n        ],\r\n        \"pedidos\": [\r\n            {\r\n                \"id\": 1,\r\n                \"restaurante\": \"Saladas+\",\r\n                \"prato\": \"Prato do dia Peixe\",\r\n                \"morada\": \"Universidade de Aveiro, DECA\"\r\n            },\r\n\r\n            {\r\n                \"id\": 2,\r\n                \"restaurante\": \"Vegifruit\",\r\n                \"prato\": \"Salada de queijo da serra\",\r\n                \"morada\": \"Universidade de Aveiro, DETI\"\r\n            },\r\n            {\r\n                \"id\": 3,\r\n                \"restaurante\": \"Green City quiches & saladas, co.\",\r\n                \"prato\": \"Quiche especial\",\r\n                \"morada\": \"Universidade de Aveiro, CP\"\r\n            },\r\n        ]\r\n    },\r\n}\r\nexport const store = configStore();\r\n\r\nvar firebaseConfig = {\r\n    apiKey: \"AIzaSyDNVW5qZxXnfqYfnNUvpFUH9dAeQfRmHu4\",\r\n    authDomain: \"appams-f22a3.firebaseapp.com\",\r\n    projectId: \"appams-f22a3\",\r\n    storageBucket: \"appams-f22a3.appspot.com\",\r\n    databaseURL: \"https://appams-f22a3-default-rtdb.firebaseio.com/\",\r\n    messagingSenderId: \"184182571952\",\r\n    appId: \"1:184182571952:web:576eed43083fbf07fc8c75\",\r\n    measurementId: \"G-CHN6Z9P409\"\r\n};\r\n// Initialize Firebase\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\nexport const db = firebase.database();\r\nexport default function AppWraper(route) {\r\n    return (\r\n        <Provider store={store}>\r\n            <AppContent />\r\n        </Provider>\r\n    );\r\n}\r\n\r\n\r\n\r\nconst AppTab = createStackNavigator();\r\n\r\nfunction AppContent() {\r\n    const [isCliente, setIsCliente] = useState(false);\r\n    const [isRestaurante, setIsRestaurante] = useState(false);\r\n    const [isEstafeta, setIsEstafeta] = useState(false);\r\n    let logged = store.getState();\r\n    let user = logged.cartReducer.user;\r\n    logged = logged.cartReducer.isLogged;\r\n    return (<>\r\n        {logged &&\r\n            <>\r\n                {isCliente &&\r\n                    <ClienteApp setIsLogged />\r\n                }\r\n                {isRestaurante &&\r\n                    <RestauranteApp restaurante={users[user]} setIsLogged />\r\n                }\r\n                {isEstafeta &&\r\n                    <EstafetaApp estafeta={users[user]} setIsLogged />\r\n                }\r\n            </>\r\n        }\r\n        {!logged &&\r\n            <Login user={user} setUser={setUser} setIsCliente={setIsCliente} setIsRestaurante={setIsRestaurante} setIsEstafeta={setIsEstafeta} />\r\n        }\r\n    </>);\r\n}\r\n\r\nfunction Login({ navigation, setIsLogged, setIsCliente, setIsRestaurante, setIsEstafeta, user, setUser }) {\r\n    const [password, setPassword] = useState(\"\");\r\n    const [users, setUsers] = useState({});\r\n    const dispatch = useDispatch();\r\n    useEffect(() => {\r\n        firebase.database().ref(\"Users\").once('value').then(res => setUsers(res.val()));\r\n    }, []);\r\n    return (\r\n        <View style={styles.container}>\r\n            <Text style={styles.title}>Nutrilink</Text>\r\n            <View style={styles.loginContainer}>\r\n                <View style={styles.inputView}>\r\n                    <TextInput placeholder='Username' style={styles.input} onChangeText={username => dispatch(setUser(username))} />\r\n                </View>\r\n                <View style={styles.inputView}>\r\n                    <TextInput placeholder='Password' style={styles.input} onChangeText={pass => setPassword(pass)} secureTextEntry />\r\n                </View>\r\n                <View style={styles.containerRow}>\r\n                    <TouchableOpacity style={styles.loginButtonContainer} onPress={() => {\r\n\r\n                        let logged = store.getState();\r\n                        let user = logged.cartReducer.user;\r\n                        console.log(user)\r\n                        firebase.database().ref(\"Users\").once('value').then(res => setUsers(res.val()));\r\n                        console.log(users);\r\n                        for (let typeUser of Object.keys(users))\r\n                            if (user === typeUser) {\r\n                                switch (users[user].type) {\r\n                                    case \"cliente\":\r\n                                        dispatch(setLogged(true));\r\n                                        setIsCliente(true);\r\n                                        break;\r\n                                    case \"restaurante\":\r\n                                        dispatch(setLogged(true));\r\n                                        setIsRestaurante(true);\r\n                                        setUser(users[user].restaurante);\r\n                                        break;\r\n                                    case \"estafeta\":\r\n                                        dispatch(setLogged(true));\r\n                                        setIsEstafeta(true);\r\n                                        break;\r\n                                    default:\r\n                                        break;\r\n                                }\r\n                            }\r\n                    }}>\r\n                        <Text style={styles.loginButtonText}>Login</Text>\r\n                    </TouchableOpacity>\r\n                    <TouchableOpacity style={styles.loginButtonContainer}>\r\n                        <Text style={styles.loginButtonText}>Registar</Text>\r\n                    </TouchableOpacity>\r\n                </View>\r\n            </View>\r\n        </View>\r\n    );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        backgroundColor: 'darkcyan',\r\n        alignItems: 'center',\r\n        flex: 1\r\n\r\n    },\r\n    containerRow: {\r\n        paddingTop: 20,\r\n        flexDirection: 'row'\r\n    },\r\n    loginContainer: {\r\n        backgroundColor: 'darkcyan',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        flex: 1\r\n    },\r\n    title: {\r\n        borderTopWidth: 100,\r\n        borderTopColor: 'darkcyan',\r\n        fontSize: 40,\r\n        fontWeight: 'bold',\r\n        color: 'cornsilk'\r\n    },\r\n    inputView: {\r\n        borderBottomWidth: 10,\r\n        borderBottomColor: 'darkcyan'\r\n    },\r\n    input: {\r\n        backgroundColor: 'darkgray',\r\n        padding: 15,\r\n        borderRadius: 5,\r\n    },\r\n    loginButtonContainer: {\r\n        elevation: 8,\r\n        backgroundColor: \"#009688\",\r\n        borderRadius: 28,\r\n        paddingVertical: 15,\r\n        paddingHorizontal: 25,\r\n\r\n    },\r\n    loginButtonText: {\r\n        fontSize: 18,\r\n        color: \"#fff\",\r\n        fontWeight: \"bold\",\r\n        alignSelf: \"center\",\r\n        textTransform: \"uppercase\"\r\n    }\r\n});"]},"metadata":{},"sourceType":"module"}